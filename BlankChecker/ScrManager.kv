WindowManager:
    TutorialPageOne:
    TutorialPageTwo:
    ConstructorPageOne:


<PreviewPage>:
    BoxLayout:
        Image:
            source: 'images/preview_page.jpg'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: 2, 2


# ====================================================================================
# /////////////// Первая страница обучения использования приложения //////////////////
# ====================================================================================

<TutorialPageOne>:
    orientation: 'vertical'

    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'images/tutorial_page_1.png'
            size_hint: 0.9, 0.9
            pos_hint: {'center_x': 0.5, 'top': 1}


        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            size_hint:  0.3, 0.05
            pos_hint: {'top': 1, 'right': 1}
            font_size: self.width/6
            text: 'Пропустить'

            on_release:
                root.skip_tutorial()

        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Далее'

            on_release:
                root.switch_next_screen()

        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.80}
            size_hint: 0.6, 0.3
            text: 'Добро пожаловать в помощник\nпроверки тестов!'
            text_color: 1, 0, 0, 1
            halign: 'center'

        Label
            color: 0, 0, 0, 0.5
            font_size: self.width/15
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}
            size_hint: 0.6, 0.3
            text: 'Это обучение поможет Вам\nнаучиться пользоваться нашим приложением.\nДля начала познакомимся с\nнастройками бланка.'
            text_color: 1, 0, 0, 1
            halign: 'center'


# ====================================================================================
# /////////////// Вторая страница обучения использования приложения //////////////////
# ====================================================================================

<TutorialPageTwo>:
    orientation: 'vertical'
    padding: 15
    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'images/tutorial_page_2.jpg'
            size_hint: 1, 0.8
            pos_hint: {'center_x': 0.45, 'top': 1}

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 0.2}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Назад'

            on_release:
                root.switch_screen_back()

        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Далее'

            on_release:
                root.switch_next_screen()

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            size_hint:  0.3, 0.05
            pos_hint: {'top': 1, 'right': 1}
            font_size: self.width/6
            text: 'Пропустить'

            on_release:
                root.skip_tutorial()

        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            size_hint: 0.6, 0.3
            text: 'Настройки бланка'
            text_color: 1, 0, 0, 1
            halign: 'center'


        Label
            color: 0, 0, 0, 0.5
            font_size: self.width/15
            pos_hint: {'center_x': 0.5, 'center_y': 0.23}
            size_hint: 0.6, 0.3
            text: 'На первой странице Вам необходимо\nвыбрать все нужные Вам\nхарактеристики бланка.\nМаксимальное количество вопросов - 36.'
            text_color: 1, 0, 0, 1
            halign: 'center'


# ====================================================================================
# /////////////// Третья страница обучения использования приложения //////////////////
# ====================================================================================

<TutorialPageThree>:
    orientation: 'vertical'
    padding: 15
    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'images/tutorial_page_3.jpg'
            size_hint: 1, 0.8
            pos_hint: {'center_x': 0.45, 'top': 1}

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 0.2}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Назад'

            on_release:
                root.switch_screen_back()

        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Далее'

            on_release:
                root.switch_next_screen()

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            size_hint:  0.3, 0.05
            pos_hint: {'top': 1, 'right': 1}
            font_size: self.width/6
            text: 'Пропустить'

            on_release:
                root.skip_tutorial()

        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            size_hint: 0.6, 0.3
            text: 'Настройки бланка'
            text_color: 1, 0, 0, 1
            halign: 'center'


        Label
            color: 0, 0, 0, 0.5
            font_size: self.width/15
            pos_hint: {'center_x': 0.5, 'center_y': 0.23}
            size_hint: 0.6, 0.3
            text: 'На второй странице для каждого\nварианта необходимо ввести\nпоследовательность ответов без\nпробелов и разделяющих знаков!'
            text_color: 1, 0, 0, 1
            halign: 'center'




# ====================================================================================
# ///////////// Четвертая страница обучения использования приложения /////////////////
# ====================================================================================

<TutorialPageFour>:
    orientation: 'vertical'
    padding: 15
    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'images/tutorial_page_4.jpg'
            size_hint: 1, 0.8
            pos_hint: {'center_x': 0.45, 'top': 1}

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 0.2}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Назад'

            on_release:
                root.switch_screen_back()

        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Далее'

            on_release:
                root.switch_next_screen()

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            size_hint:  0.3, 0.05
            pos_hint: {'top': 1, 'right': 1}
            font_size: self.width/6
            text: 'Пропустить'

            on_release:
                root.skip_tutorial()

        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.90}
            size_hint: 0.6, 0.3
            text: 'Выбор изображений'
            text_color: 1, 0, 0, 1
            halign: 'center'


        Label
            color: 0, 0, 0, 0.5
            font_size: self.width/15
            pos_hint: {'center_x': 0.5, 'center_y': 0.23}
            size_hint: 0.6, 0.3
            text: 'После завершения настройки бланка\nВам необходимо выбрать изображения\nс Вашего мобильного устройства.\nВыбирайте все нужные изображения\nпо очереди и нажимайте кнопку "Готово".'
            text_color: 1, 0, 0, 1
            halign: 'center'




# ====================================================================================
# ///////////// Пятая страница обучения использования приложения /////////////////
# ====================================================================================

<TutorialPageFive>:
    orientation: 'vertical'
    padding: 15
    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'images/tutorial_page_5.jpg'
            size_hint: 1, 0.8
            pos_hint: {'center_x': 0.45, 'top': 1}

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 0.2}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Назад'

            on_release:
                root.switch_screen_back()

        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Готово'

            on_release:
                root.switch_to_constructor()

        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            size_hint: 0.6, 0.3
            text: 'Результаты проверки'
            text_color: 1, 0, 0, 1
            halign: 'center'


        Label
            color: 0, 0, 0, 0.5
            font_size: self.width/15
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}
            size_hint: 0.6, 0.3
            text: 'Вот и все!\nДля переключения между фотографиями\nпроведите пальцем влево или вправо. '
            text_color: 1, 0, 0, 1
            halign: 'center'



# ====================================================================================
# ////////////////////////////// Переход к конструктору //////////////////////////////
# ////////////////////////////////// (1 страница ) ///////////////////////////////////
# ====================================================================================

<ConstructorPageOne>
    orientation: 'vertical'
    FloatLayout
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            color: 0, 0, 0, 0.5
            font_size: self.width/17
            text: 'Выберете количество вариантов\nтеста'
            halign: 'left'
            pos_hint: {'center_x': 0.5, 'center_y': 0.87}

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            size_hint:  0.3, 0.05
            pos_hint: {'top': 1, 'center_x': 0.3}
            font_size: self.width/6
            text: '<--  Назад на туториал'

            on_release:
                root.switch_back_to_tutorial()

        GridLayout:
            size_hint: 0.8, 0.1
            cols: 8
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}

            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '1'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '2'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '3'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '4'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '5'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '6'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '7'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '8'

            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '1')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '2')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '3')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '4')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '5')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '6')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '7')
            CheckBox:
                group: 'count_variants'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_variants(self.active, '8')


        Label:
            color: 0, 0, 0, 0.5
            font_size: self.width/17
            text: 'Выберете количество вариантов\nответа'
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}



        GridLayout:
            size_hint: 0.8, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.43}
            cols: 8
            spacing: 1

            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '1'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '2'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '3'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '4'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '5'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '6'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '7'
            Label:
                color: 0, 0, 0, 0.3
                font_size: 15
                text: '8'

            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '1')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '2')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '3')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '4')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '5')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '6')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '7')
            CheckBox:
                group: 'count_answers'
                color: 1, 0, 1, 1
                on_active:
                    root.on_click_checkbox_answers(self.active, '8')

        Label:
            color: 0, 0, 0, 0.5
            font_size: self.width/17
            text: 'Выберете количество вопросов'
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}

        TextInput:
            id: count_question_input
            size_hint: 0.3, 0.05
            font_size: self.width/8
            pos_hint: {'center_x': 0.5, 'center_y': 0.18}

        Label:
            color: 0, 0, 0, 0.3
            font_size: 8
            text: 'Максимум 46'
            pos_hint: {'center_x': 0.5, 'center_y': 0.14}

        Button
            id: 'next_button'
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Далее'

            on_release:
                root.switch_next_screen()


# ====================================================================================
# /////////////////////////////////// Конструктор ////////////////////////////////////
# ////////////////////////////////// (2 страница ) ///////////////////////////////////
# ====================================================================================

<ConstructorPageTwo>
    orientation: 'vertical'
    on_pre_enter:
        root.get_textinput()

    on_leave:
        root.clean_input()

    FloatLayout
        id: constructor_two_layout
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            color: 0, 0, 0, 0.5
            font_size: self.width/17
            text: 'Введите правильную последова-\nтельность ответов'
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}


        Button
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 1}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Готово'

            on_release:
                root.switch_to_check_data_page()

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0]
            pos_hint: {'y': 0, 'right': 0.2}
            size_hint: 0.2, 0.05
            font_size: self.width/4
            text: 'Назад'

            on_release:
                root.switch_screen_back()


# ====================================================================================
# ////////////////////////////// Загрузка фотографии /////////////////////////////////
# ====================================================================================

<DownloadPicturePage>
    FloatLayout:
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size


        Image:
            source: 'images/load_picture.jpg'
            size_hint: 1.5, 1.5
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}


        Label
            color: 0.5, 0, 1, 1
            font_size: self.width/10
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            size_hint: 0.6, 0.3
            text: 'Выберите изображения'
            text_color: 1, 0, 0, 1
            halign: 'center'


        Button:
            color: 1, 1, 1, 1
            background_color: 0, 0, 0, 0.2
            text: 'Загрузить'
            size_hint: 0.4, 0.08
            pos_hint: {'center_x': 0.5, 'center_y': 0.23}

            on_release: root.get_picture()



# ====================================================================================
# ////////////////////////////// Галлерея фотографий /////////////////////////////////
# ====================================================================================

<GalleryPictures>
    id: gallery_pictures

    BoxLayout:
        id: gallery_layout
        orientation: 'vertical'
        spacing: 10
        padding: 10

        FileChooserListView:
            id: filechooser
            on_selection: gallery_pictures.selected(filechooser.selection)

        BoxLayout:
            spacing: 5
            size_hint: 1, 0.1
            id: gallery_buttons

            Button:
                id: load_button
                disabled: True
                size_hint: 0.4, 1
                text: 'Добавить'

                on_release: root.load_picture()

            Button:
                id: done_button
                disabled: True
                size_hint: 0.4, 1
                text: 'Готово'

                on_release: root.close_gallery()


# ====================================================================================
# ////////////////////////////// Результаты проверки /////////////////////////////////
# ====================================================================================

<ResultsPage>
    on_pre_enter:
        root.set_picture()

    FloatLayout:
        id: results_page
        canvas.before:
            Color:
                rgba: 255, 255, 255, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Carousel:
            id: pictures_result

        Button:
            color: 0.28, 0, 1, 1
            background_color: [255, 255, 255, 0.5]
            pos_hint: {'y': 0.01, 'center_x': 0.4}
            size_hint: 1, 0.05
            font_size: self.width/19
            text: '  <--  Выбрать новые изображения'

            on_release:
                root.switch_screen_back()

